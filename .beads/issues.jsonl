{"id":"BID-1","title":"Implement full communication_iframe for cross-origin state sync","description":"The communication_iframe is currently a minimal stub that just prevents 404 errors. It needs to be fleshed out to properly handle cross-origin login state synchronization.\n\nThe iframe sits hidden on every page that includes `include.js` and should:\n\n1. **Detect existing sessions** - Check if user is already authenticated with the broker when page loads\n2. **Notify of login/logout** - Trigger `onlogout` callbacks on all open tabs when user logs out from broker or another site\n3. **Enable `onmatch` callback** - Fire `navigator.id.watch({ onmatch: ... })` when existing session matches\n\nCurrently located at: `browserid-broker/static/communication_iframe.html`\n\nReference: Original Persona used jschannel for the cross-origin messaging protocol.","acceptance_criteria":"- [ ] Communication iframe properly initializes jschannel connection with include.js\n- [ ] Existing broker session is detected on page load\n- [ ] Login events are broadcast to all tabs with include.js loaded\n- [ ] Logout events are broadcast to all tabs\n- [ ] `onmatch` callback fires when session exists","status":"open","priority":2,"issue_type":"feature","created_at":"2025-12-26T21:47:03.172494+01:00","updated_at":"2025-12-26T21:47:03.172494+01:00"}
